== Окружение программы
[#img-image1,link=https://sun9-46.userapi.com/impg/qEq2ttn5v7UkvSyMC6MZx-FuLBFYFAFBHQ0G3w/kPoDd-BhFOM.jpg?size=1563x387&quality=96&sign=f365ade28893cc7ee24a1fef86affa4b&type=album] 
image::image1.jpg[]

== BME280 

. Датчик BME280 используется для измерения давления, влажности и температуры.

. Период измерения составляет 100 мс.

. В BME280 предусмотрен БИХ-фильтр, для более точных измерений он будет включен.

. Общение с датчиком осуществляться по интерфейсу SPI4 (SPI_CR4) находится на линиях:

.. PA1 - NSS;

.. PE12 - SCK;

.. PE13 - MISO;

.. PE14 - MOSI.

. Байты отправляемы по MOSI: 

.. Байт (0x77) - команда на запись;

.. Байт (0xF7) - команда на чтение.

. BME280 измерение температуры:

.. Температура измеряется в градусах цельсия;

.. Объем данных температуры равен 20 бит;

.. "ctrl_meas" (0xF4) - Регистр которые устанавливает параметры сбора данных температуры;

.. Регистры (0xFA…0xFC) - Содержат необработанные выходные данные измерения температуры.

. BME280 измерение давления:

.. Давление измеряется в паскалях, требуется перевести паскали в миллиметры ртутного столба, 1 па = 133.321995 миллиметрам ртутного столба, следовательно итоговое значение давления требуется поделить на 133.321995;

.. Объем данных давления равен 20 бит;

.. "ctrl_meas" (0xF4) - Регистр которые устанавливает параметры сбора данных давления;

.. Регистры (0xF7…0xF9) - Содержат необработанные выходные данные измерения давления.

. BME280 измерение влажности:

.. Влажность измеряется в %;

.. Объем данных давления равен 16 бит;

.. "ctrl_hum" (0xF2) - Регистр которые устанавливает параметры сбора данных влажности.

.. Регистры (0xFD…0xFE) - Содержат необработанные выходные данные измерения влажности.

. Точка росы - рассчитываемый параметр, для этого потребуется:

.. Показания температуры - T;

.. Показания влажности - φ (фи).

[#img-image2,link=https://sun9-11.userapi.com/impg/pCUxks5X5LeHlpO3W7DJpCHkmO2y6zha9zZy5A/J4KLfDaMJBA.jpg?size=237x94&quality=96&sign=0a3c054e23eaec35c202aa9bd07c501b&type=album] 
image::image2.jpg[]

. Для настройки BME280 потребуется следующие регистры:

.. регистр (0x76) - Адрес BME280;

.. регистр (0xD0) - ID регистр BME280;

.. регистр (0x60) - Информация, читаемая от BME280 в ID регистре; 

.. регистр (0xE0) - Регистр для перезагрузки BME280; 

.. регистр (0xB6) - Значение, записываемое в регистр для перезагрузки BME280;

.. регистр (0XF3) - Регистр статуса BME280; 

.. регистр (0X01) - Значение из регистра статуса при окончании измерения BME280; 

.. регистры (0x88, 0x8A, 0x8C) - Регистр, откуда читаем калибровочное значение температуры;

.. регистры (0xA1, 0xE1, 0xE3, 0xE4, 0xE5, 0xE7) - Регистр, откуда читаем калибровочное значение влажности;

.. регистры (0x8E, 0x90, 0x92, 0x94, 0x96, 0x98, 0x9A, 0x9C, 0x9E) - Регистр, откуда читаем калибровочное значение давления;

.. регистр (0xF5) - Регистр конфигурации BME280, задаём время ожидания, значение постоянной времени
фильтра BME280 

. Все данные передаются младшим байтом в перед, по этому будет необходима функция перестановки байтов